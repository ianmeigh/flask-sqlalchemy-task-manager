{% extends "base.html" %}
{% block content %}
<h3 class="light-blue-text text-darken-4 center-align">Tasks</h3>
<div class="row">
  <div class="col s12 center-align">
    <a href="{{  url_for('add_task')  }}" class="btn-large light-blue darken-2">
      Add Task <i class="fa-solid fa-plus right"></i>
    </a>
  </div>
</div>

<div class="row">
  <div class="col s12">
    <ul class="collapsible">
      {% for task in tasks | sort(attribute="due_date") %}

      <li>
        <div class="collapsible-header white-text light-blue darken-4">
          <p>
            <i class="fa-solid fa-chevron-down"></i>
            <strong>{{ task.task_name }}</strong> : {{ task.due_date.strftime("%d %B, %Y") }}
            {% if task.is_urgent %}
            <i class="fa-solid fa-circle-exclamation light-blue-text text-lighten-2 "></i>
            {% endif %}
          </p>
        </div>
        <div class="collapsible-body">
          <strong>{{ task.category.category_name }}</strong>
          <p>{{ task.task_description }}</p>
          <a href="" class="btn green accent-4 m-2">Edit</a>
          <a href="#modal-{{ task.id }}" class="btn red m-2 modal-trigger">Delete</a>

          <!-- Modal -->
          <div id="modal-{{ task.id }}" class="modal">
            <div class="modal-content">
              <h4>Delete '{{ task.task_name }}'?</h4>
              <p>Are you sure want to delete the category named '<strong>{{task.task_name}}</strong>'?</p>
              <p>This action cannot be undone.</p>
            </div>
            <div class="modal-footer">
              <a href="" class="btn red">Delete</a>
              <a href="#!" class="btn green accent 4 modal-close">Cancel</a>
            </div>
          </div>

        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}